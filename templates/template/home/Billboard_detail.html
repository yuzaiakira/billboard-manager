{% extends 'template/home/base_body.html' %}
{% load change_bool_value %}
{% load jalali_date %}
{% load static %}
{% block title %}{% if object.title %}{{ object.title }}{% else %}{{ object.name }}{% endif %}{% endblock %}
{% block content %}

      <!-- Billboard Details Section -->
    <section class="py-16">
        <div class="container mx-auto px-4">
            <div class="flex flex-col lg:flex-row gap-8">
                <!-- Main Content -->
                <div class="lg:w-2/3">
                    <!-- Billboard Image -->
                    <div class="bg-gray-200 rounded-xl overflow-hidden mb-8 h-96">
                        <img src="{{ object.billboard_pic_url }}" alt="بیلبورد" class="w-full h-full object-cover">
                    </div>

                    <!-- Billboard Title and Address -->
                    <h1 class="text-3xl font-bold text-dark mb-2">{{ object.name }}</h1>
                    <p class="text-gray-600 mb-6"><i class="fas fa-map-marker-alt text-primary ml-2"></i>{{ object.address }}</p>

                    <!-- Billboard Description -->
                    <div class="mb-12 description">
                        <h2 class="text-2xl font-bold text-dark mb-4">توضیحات</h2>
                        {{object.desc}}
                    </div>

                    <!-- Three-column Section -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12" style="direction: rtl;">
                        <div class="bg-white p-6 rounded-xl shadow-md border border-gray-100">
                            <h3 class="font-bold text-dark mb-2">نوع پرداخت</h3>
                            <p class="text-gray-600">ماهانه</p>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-md border border-gray-100">
                            <h3 class="font-bold text-dark mb-2">نورپردازی</h3>
                            <p class="text-green-600 font-medium"><i class="fas fa-lightbulb text-primary ml-2"></i> {{ object.has_power|boolean_value }}</p>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-md border border-gray-100">
                            <h3 class="font-bold text-dark mb-2">کد بیلبورد</h3>
                            <p class="text-gray-600">{{ object.pk }}</p>
                        </div>
                    </div>

                    <!-- Billboard Gallery -->
                {% if object.BillboardImageModel %}
                     <div class="mb-12">
                        <h2 class="text-2xl font-bold text-dark mb-6">گالری</h2>
                        <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                        {% for image in object.BillboardImageModel.all %}

                            <div class="h-40 bg-gray-200 rounded-lg overflow-hidden">
                                <img src="{ image.image.url }}" alt="{{ image.title|default:object.name }}" class="w-full h-full object-cover">
                            </div>

                        {% endfor %}
                        </div>
                    </div>
                {% endif %}

                    <!-- Google Maps Location -->
                    {% if object.map_iframe %}
                    <div class="mb-12">
                        <h2 class="text-2xl font-bold text-dark mb-6">موقعیت</h2>
                        <div class="bg-gray-200 h-96 rounded-xl overflow-hidden">
                           <iframe src="{{ object.map_iframe }}"
                                   width="746" height="312" style="border:0;"
                                   allowfullscreen="" loading="lazy"
                                   referrerpolicy="no-referrer-when-downgrade"></iframe>
                        </div>
                    </div>
                    {% endif %}
                </div>

                <!-- Sidebar -->
                <div class="lg:w-1/3">
                    <div class="bg-white rounded-xl shadow-md p-6 sticky top-24">
                        <div class="mb-6 pb-6 border-b border-gray-200">
                            <h3 class="font-bold text-dark mb-4">تاریخ نمایش</h3>
                            <p class="text-gray-600">{{ object.reservation_date|jalali_slash }}</p>
                        </div>

                        <div class="mb-6 pb-6 border-b border-gray-200">
                            <h3 class="font-bold text-dark mb-4">قیمت</h3>
                            <p class="text-primary font-bold text-xl">{{ object.BillboardFinalPriceModel.final_price }} تومان</p>
                        </div>

                        <div class="mb-6 pb-6 border-b border-gray-200">
                            <h3 class="font-bold text-dark mb-4">ابعاد</h3>
                            <div class="flex justify-between mb-2">
                                <span class="text-gray-600">عرض:</span>
                                <span class="font-medium">{{ object.billboard_width }} متر</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">ارتفاع:</span>
                                <span class="font-medium">{{ object.billboard_length }} متر</span>
                            </div>
                        </div>

                        <div class="mb-6 pb-6 border-b border-gray-200">
                            <h3 class="font-bold text-dark mb-4">موقعیت</h3>
                            <p class="text-gray-600"><a href="{{ object.city.state.get_absolute_url }}">{{ object.city.state.name }}</a> / <a href="{{ object.city.get_absolute_url }}">{{ object.city.name }}</a></p>
                        </div>

                        <div class="mb-6 pb-6 border-b border-gray-200">
                            <h3 class="font-bold text-dark mb-4">اشتراک‌گذاری</h3>
                            <div class="flex space-x-reverse space-x-3">
                                <a href="#" class="w-10 h-10 rounded-full bg-primary flex items-center justify-center text-white hover:bg-secondary transition duration-300">
                                    <i class="fab fa-facebook-f"></i>
                                </a>
                                <a href="#" class="w-10 h-10 rounded-full bg-primary flex items-center justify-center text-white hover:bg-secondary transition duration-300">
                                    <i class="fab fa-instagram"></i>
                                </a>
                                <a href="#" class="w-10 h-10 rounded-full bg-primary flex items-center justify-center text-white hover:bg-secondary transition duration-300">
                                    <i class="fab fa-twitter"></i>
                                </a>
                                <a href="#" class="w-10 h-10 rounded-full bg-primary flex items-center justify-center text-white hover:bg-secondary transition duration-300">
                                    <i class="fab fa-linkedin-in"></i>
                                </a>
                            </div>
                        </div>

                        <div class="mb-6">
                            <h3 class="font-bold text-dark mb-4">چاپ</h3>
                            <div class="space-y-3">
                                <button onclick="window.print()" class="btn-hover w-full bg-primary hover:bg-secondary text-white font-medium py-2 px-4 rounded-lg transition duration-300">
                                    <i class="fas fa-print ml-2"></i> چاپ تکی
                                </button>
                                <a href="{% url 'add-to-list' object.pk %}" class="btn-hover w-full text-center bg-primary hover:bg-secondary text-white font-medium py-2 px-4 rounded-lg transition duration-300 button-add-list" data-billboard-id="{{ object.pk }}">
                                    <i class="fas fa-list ml-2"></i> <span class="button-add-list-text">افزودن به لیست</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


        <!-- Related Billboards Section -->
    <section class="py-16">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-dark mb-4">بیلبوردهای مرتبط</h2>
                <p class="text-gray-600 max-w-2xl mx-auto">جدیدترین بیلبوردهای ما را که برای اجاره فوری در دسترس هستند کشف کنید</p>
            </div>
{% if object.get_related %}
    {% for related in object.get_related%}
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" style="direction: rtl;">
                <!-- Billboard Card 1 -->
                <div class="card-hover bg-white rounded-xl overflow-hidden shadow-md">
                    <div class="h-48 bg-gray-200 relative">
                        <img src="{{ related.billboard_pic_url }}" alt="{{ related.name }}" class="w-full h-full object-cover">
                        <div class="absolute top-4 left-4 bg-primary text-white text-sm font-bold px-3 py-1 rounded-full">
                            جدید
                        </div>
                    </div>
                    <div class="p-6">
                        <h3 class="text-xl font-bold text-dark mb-2">{{ related.name }}</h3>
                        <p class="text-gray-600 mb-4"><i class="fas fa-map-marker-alt text-primary ml-2"></i>{{ related.address }}</p>
                        <div class="flex flex-row-reverse justify-between mb-4">
                            <div>
                                <p class="text-gray-700 font-medium">نورپردازی</p>
                                <div class="flex flex-row-reverse items-center">
                                    <i class="fas fa-lightbulb text-primary ml-2"></i>
                                    <span class="text-green-600 font-medium">{{ related.has_power|boolean_value }}</span>
                                </div>
                            </div>
                            <div>
                                <p class="text-gray-700 font-medium">تاریخ شروع</p>
                                <p class="text-gray-600">{{ related.reservation_date|jalali_slash }}</p>
                            </div>
                        </div>
                        <div class="flex flex-row-reverse gap-3">
                            <a href="{{ related.get_absolute_url }}" class="btn-hover flex-1 text-center bg-light hover:bg-gray-100 text-primary font-medium py-2 px-4 rounded-lg border border-primary transition duration-300">
                                مشاهده بیلبورد
                            </a>
                            <a href="{% url 'add-to-list' related.pk %}" class="btn-hover flex-1 text-center bg-primary hover:bg-secondary text-white font-medium py-2 px-4 rounded-lg transition duration-300 button-add-list" data-billboard-id="{{ related.pk }}">
                                <span class="button-add-list-text">افزودن به لیست</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
    {% endfor %}
{% endif %}
            <div class="text-center mt-12">
                <a href="{%url 'billboard-list' %}" class="btn-hover bg-white border-2 border-primary text-primary hover:bg-primary hover:text-white font-bold py-3 px-8 rounded-lg text-lg transition duration-300">
                    مشاهده بیلبوردهای بیشتر
                </a>
            </div>
        </div>
    </section>


{% endblock %}


{% block script %}
{% include 'template/home/add_list_ajax.html' %}
{% endblock %}